<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Szachy – interaktywne</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f4f4f4;
}

.container {
  max-width: 420px;
  margin: 40px auto;
  background: #fff;
  padding: 20px;
  border-radius: 10px;
}

.board {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  aspect-ratio: 1;
  border: 3px solid #333;
}

.square {
  display: flex;
  align-items: center;
  justify-content: center;
}

.light { background: #f0d9b5; }
.dark  { background: #b58863; }

.piece {
  width: 90%;
  height: 90%;
  cursor: grab;
}
</style>
</head>

<body>

<div class="container">
  <h2>Interaktywna plansza (jak chess.com)</h2>
  <div id="board" class="board"></div>
</div>

<script>
// ===== SVG FIGURY (INLINE – 100% DZIAŁA) =====
const SVG = {
  K:`<svg viewBox="0 0 45 45"><path d="M22.5 11l-5 4h10zM12 37h21v-3H12z" fill="#fff" stroke="#000"/></svg>`,
  Q:`<svg viewBox="0 0 45 45"><circle cx="12" cy="14" r="3"/><circle cx="22" cy="10" r="3"/><circle cx="32" cy="14" r="3"/><path d="M12 14l10 23h1l10-23" fill="#fff" stroke="#000"/></svg>`,
  k:`<svg viewBox="0 0 45 45"><path d="M22.5 11l-5 4h10zM12 37h21v-3H12z" fill="#000"/></svg>`
};

// ===== FEN =====
const fen = "6k1/8/8/6Q1/8/8/8/6K1 w - - 0 1";

const board = document.getElementById("board");
const rows = fen.split(" ")[0].split("/");

// ===== RYSUJ PLANSZĘ =====
for (let r = 0; r < 8; r++) {
  let file = 0;
  for (const c of rows[r]) {
    if (isNaN(c)) {
      const sq = createSquare(r, file);
      const piece = document.createElement("div");
      piece.className = "piece";
      piece.innerHTML = SVG[c];
      piece.draggable = true;

      piece.addEventListener("dragstart", e => {
        e.dataTransfer.setData("text/plain", "");
        dragged = piece;
      });

      sq.appendChild(piece);
      board.appendChild(sq);
      file++;
    } else {
      for (let i = 0; i < c; i++) {
        board.appendChild(createSquare(r, file++));
      }
    }
  }
}

let dragged = null;

function createSquare(r, f) {
  const sq = document.createElement("div");
  sq.className = "square " + ((r + f) % 2 ? "dark" : "light");

  sq.addEventListener("dragover", e => e.preventDefault());
  sq.addEventListener("drop", () => {
    if (dragged) {
      sq.innerHTML = "";
      sq.appendChild(dragged);
      dragged = null;
    }
  });

  return sq;
}
</script>

</body>
</html>
