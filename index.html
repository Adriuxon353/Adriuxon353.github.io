<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Zadania szachowe – FEN</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f4f4f4;
}

header {
  background: #222;
  color: #fff;
  text-align: center;
  padding: 20px;
}

.container {
  max-width: 900px;
  margin: 30px auto;
  background: #fff;
  padding: 20px;
  border-radius: 8px;
}

.board {
  display: grid;
  grid-template-columns: repeat(8, min(10vw, 60px));
  grid-template-rows: repeat(8, min(10vw, 60px));
  border: 3px solid #333;
}

.square {
  display: flex;
  align-items: center;
  justify-content: center;
}

.light { background: #f0d9b5; }
.dark  { background: #b58863; }

.piece {
  width: 90%;
  height: 90%;
  user-select: none;
  pointer-events: none;
}

button {
  margin-top: 10px;
  padding: 8px 14px;
  border: none;
  border-radius: 5px;
  background: #222;
  color: #fff;
  cursor: pointer;
}
button:hover { background: #444; }

.solution {
  display: none;
  margin-top: 10px;
  background: #dff0d8;
  padding: 10px;
  border-radius: 5px;
}
</style>
</head>

<body>

<header>
  <h1>♟️ Zadania Szachowe (FEN)</h1>
</header>

<div class="container">
  <h2>Mat w 1</h2>

  <div id="board" class="board"></div>

  <button onclick="toggleSolution()">Pokaż rozwiązanie</button>
  <div id="solution" class="solution">Qg7#</div>
</div>

<script>
// ====== GRAFIKA FIGUR (PEWNE SVG) ======
const pieceImages = {
  p: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/bp.png",
  r: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/br.png",
  n: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/bn.png",
  b: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/bb.png",
  q: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/bq.png",
  k: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/bk.png",
  P: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/wp.png",
  R: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/wr.png",
  N: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/wn.png",
  B: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/wb.png",
  Q: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/wq.png",
  K: "https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/img/chesspieces/wikipedia/wk.png"
};

// ====== FEN (MOŻESZ ZMIENIĆ) ======
const fen = "6k1/8/8/6Q1/8/8/8/6K1 w - - 0 1";

// ====== RYSOWANIE PLANSZY ======
const board = document.getElementById("board");
board.innerHTML = "";

const files = ["a","b","c","d","e","f","g","h"];
const rows = fen.split(" ")[0].split("/");

for (let r = 0; r < 8; r++) {
  let fileIndex = 0;
  for (const char of rows[r]) {
    if (!isNaN(char)) {
      fileIndex += parseInt(char);
    } else {
      const square = createSquare(r, fileIndex);
      const img = document.createElement("img");
      img.src = pieceImages[char];
      img.className = "piece";
      square.appendChild(img);
      board.appendChild(square);
      fileIndex++;
    }
  }
  while (fileIndex < 8) {
    board.appendChild(createSquare(r, fileIndex));
    fileIndex++;
  }
}

function createSquare(rank, file) {
  const sq = document.createElement("div");
  const isLight = (rank + file) % 2 === 0;
  sq.className = "square " + (isLight ? "light" : "dark");
  return sq;
}

// ====== ROZWIĄZANIE ======
function toggleSolution() {
  const s = document.getElementById("solution");
  s.style.display = s.style.display === "block" ? "none" : "block";
}
</script>

</body>
</html>
